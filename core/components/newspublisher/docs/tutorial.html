
<p>NewsPublisher is a front-end resource creation and editing tool for MODX Revolution. It allows users to create new documents and edit existing documents in the front end of your site without needing access to the MODX Manager. Editing existing documents involves placing a tag for the NpEditThisButton snippet in your page template. Clicking on the button produced by the snippet launches NewsPublisher for that resource. You do not have to create *any* form fields. NewsPublisher creates them based on the field or TV type and its current or default value (if any).</p>

<h3>Fully Updated for MODX 3</h3>

<h3>Version 3.1.5 Notes</h3>

<p>NewsPublisher now creates the NewsPublisher page and the Login page on any new install if there are not already pages with the aliases <code>login</code> and <code>NewsPublisher</code>. If you have changed the aliases of those pages, you may get a second NewsPublisher page or a second Login page. This should only apply to new installs, so it's unlikely to affect the NewsPublisher page, but you might end up with a second login page. The best solution is to change the alias back to 'login' before installing NewsPublisher.</p>

<p>If you forget to do that, Change the <code>np_id</code> property of the NpEditThisButton snippet to the ID of your original Login page. </p>

<p>Another nice update is the opportunity to customize the NewPublisher page with MODX chunks. Just add as many the chunk names in the &show property of the NewsPublisher snippet like this:</p>

<pre><fixedpre>
    &show=`pagetitle,longtitle,someChunk,content,SomeOtherChunk`
</fixedpre></pre>

<p>The show properties are displayed in the order they appear in the <code>&show</code> property, If anything in the list is not a resource field or TV, NewsPublisher will inject the chunk content at that point. Obviously, the chunk names shouldn't match any resource fields or TVs.</p>

<p>Another change is that the permissions in your NewsPublisherEditor policy won't be overwritten when you upgrade NewsPublisher.</p>


<div class="box">
    <p><b>Important: If you are upgrading from a version prior to NewsPublisher 3.0, be sure to see the <a href="[[~[[*id]]]]#np_upgrade_notes">Version 3.0 Upgrade Notes</a> at the bottom of this page.</b></p>
</div>

<p>(Jump to <a href="[[~[[*id]]]]#np_SettingsTable">NewsPublisher System Settings Table</a>.)</p>

<p>(Jump to <a href="[[~[[*id]]]]#np_propertiesTable">NewsPublisher Snippet Properties Table</a>.)</p>

<p>(Jump to <a href="[[~[[*id]]]]#np_elFinderConnectorTable">npElFinderConnector Snippet Properties Table</a>.)</p>

<p>(Jump to <a href="[[~[[*id]]]]#npet_propertiesTable">NpEditThisButton Snippet Properties Table</a>.)</p>


<h3>Acknowledgements</h3>

<p>Special thanks are due to TinyMCE guru donshakespeare whose TinyMCEWrapper inspired much of the new version (3.0), and
    who helped solve some thorny problems with implementing the new file browser.</p>

<p>Markus Schlegel, who developed an earlier version of the NewsPublisher browser for files and images, the NewsPublisherEditor Policy and Policy Template, and who vastly improved the datepicker, was kind enough to step in and solve the many problems necessary to make the version 2.0 file browser work in MODX Version 2.3.</p>

<p>Lucy Iannotti's suggested improvements to this page were invaluable.</p>

<p>Thanks to todd.b for help testing the use of <code>&ownpagesonly</code> on aggregating pages.</p>


<h3>Installing NewsPublisher for MODX Revolution</h3>
<p>If you haven't installed the Login package, do that before installing NewsPublisher.</p>

<p>To install NewsPublisher, go to Extras | Installer on the main menu in the MODX Manager and click on the "Download Extras" button. That will take you to the Revolution Repository. Put NewsPublisher in the search box and press Enter. Click on the "Download" button. When the download has finished, click on the "Back to Package Manager" button. That should bring you back to your Package Management grid. Click on the "Install" button next to NewsPublisher in the grid and follow the prompts. The NewsPublisher snippet should now be installed.</p>

<div class="box">
    <p>On a fresh install, NewsPublisher will install a Resource called "NewsPublisher" containing an example NewsPublisher snippet tag. You can modify it to meet your needs and change the `pagetitle` but don't change the `alias` and <b>don't delete it!</b>. It's important that it keep the same ID because other parts of NewsPublisher will use that ID to find it.</p>

    <p>NewsPublisher will not change the resource during upgrades, and will not remove it when uninstalled to prevent the loss of any children you might like to keep.</p>
</div>

<h3>Using NewsPublisher</h3>

<div class="box">
    <p>Since you don't want just anyone creating resources at your site, you'll need to install the Login extra to use NewsPublisher. When testing NewsPublisher, remember that even though you're logged in to the Manager you're not necessarily logged in to the front end.</p>
</div>
<br>

<p>View the NewPublisher Resource. You should see a basic resource editing form. If you fill it in and click on the "Submit" button, the resource should be created (it will be under the NewsPublisher resource, though you can change that).</p>

<p>The example form shows several standard fields, but you can change that with the <code>&show</code> property. It should contain a comma-delimited list (no spaces) of the fields you would like to display in the form. It can include TV fields listed by name or by ID (shown in the Elements tree next to the TV's name). The fields will appear in the form in the order you list them in the <code>&show</code> property. You can also create multiple NewsPublisher pages showing different sets of fields for different users.
</p>

<p>The form is highly flexible, and you can show any fields or TVs in any order. Some fields will require you to set certain properties. For example, if you have any rich text fields, you'll need to set the <code>&initrte</code> property. If you show any date fields, you'll need the <code>&initdatepicker</code> property. The <code>&rtcontent</code> and <code>&rtsummary</code> properties control whether the content and summary fields will have rich text editing. See the list below for more information on the available properties. If you'll be using the elFinder file/image browser, either for TinyMCE, or file, richtext, or image TVs, you'll need to set the <code>&initfilebrowser</code> property. The properties can be in any order. Here's an example:</p>

<pre><fixedpre>
    [[!NewsPublisher?
        &show=`pagetitle,description,pub_date,introtext,TV1,TV2`
        &initrte=`1`
        &initdatepicker=`1`
        &initfilebrowser=`1`
        &rtcontent=`1`
        &rtsummary=`1`
        &parentid=`12`
        &published=`1`
        &captions=`content:Enter Post,introtext:Summary,description:Give a brief description`
    ]]

</fixedpre></pre>
<p>&nbsp;</p>
<p>The example above will show the fields in the <code>&show</code> property in the order they appear in that property. The new resource will be published and both the content and introtext (summary) fields will have rich text editing. The pub_date field will display a datepicker widget.</p>

<p>The captions field is optional, so try the form and see if the default captions will work for you. If not, add the <code>&captions</code> property as shown in the example above. The part before the <code>:</code> is the field name, the part after it is the caption that will be shown. The fields are separated by commas. If your captions are long, you may have to adjust the CSS to keep them from wrapping.</p>

<h3>Security</h3>
<p>NewsPublisher responds to the MODX security permission system, so users can only create resources if they are logged in and have permission to do so. As the admin Super User, you'll have full rights (unless you've done something that takes them away) to create and edit any document in the front end. Other users, however, will have to be granted permission before they can do either and their ability to edit existing resources will depend on the resource group settings.</p>

<p>In addition, users (including you) will not be able to edit resources containing MODX tags without the NewsPublisher <code>allow_modx_tags</code> permission. As of NewsPublisher 1.3.0, this permission is included in the NewsPublisherEditor Policy but is unchecked by default. Turn it on if you want users to be able to insert MODX tags in their documents. Be sure to see the section below on dealing with MODX tags.</p>

<p>When you create Context Access ACL entries using the NewsPublisherEditor Policy, you may have to flush both permissions and sessions before the new Policy will show up in the list.</p>

<p>Be aware that if you upgrade or reinstall NewsPublisher, the <code>allow_modx_tags</code> permission may be unchecked during the process and any other permissions you changed may be reverted unless you have duplicated the NewsPublisherEditor Policy and are using the duplicate.</p>

<h3>MODX Tags</h3>

<p>Recent versions of MODX include the <code>allow_tags_in_post</code> System Setting (not to be confused with the <code>allow_modx_tags</code> permission mentioned above). This makes MODX front-end forms much more secure because any MODX tags are removed from the <code>$_POST</code> array when a form is submitted. Unfortunately, it kills the option to edit resources or TVs containing MODX tags in the front end unless the <code>allow_tags_in_post</code> System Setting is on (which poses significant security risks). As of NewsPublisher 2.0, there is a workaround for this. It's not ideal, but it works. MODX tags are now represented in NewsPublisher in the form <code>{{ ... }}</code> instead of <code><fixedpre>[[ ... ]]</fixedpre></code>. This allows users with the required permission to edit MODX tags in NewsPublisher without turning on the System Setting.</p>

<p>For security reasons, it's <b>strongly recommended</b> that you leave the MODX <code>allow_tags_in_post</code> System Setting at its default setting of 'No'. If you want users to be able to edit MODX tags in NewsPublisher, put a check next to the <code>allow_modx_tags</code> permission in the NewsPublisherEditor Policy and save the Policy. For any users who will be using NewsPublisher, create a Context Access ACL entry for their User Group with a Context of 'web' and NewsPublisherEditor for the Policy. That will give them the <code>allow_modx_tags</code> permission. As always, flush permissions and sessions on the Security menu after making any changes. Remember, when testing, that if you are a sudo user, you have all possible permissions, so the restriction won't affect you.</p>

<p>NewsPublisher users will see all MODX tags in this form: <code>{{ ... }}</code> and will need to use the curly braces for any new tags they enter. All MODX tags are allowed and nested tags work fine in all my tests. The tags will be converted to standard MODX tags when the Resource is saved. <b>Important</b>: Note that if there are any tags in the form <code><fixedpre>[[ ... ]]</fixedpre></code> in any field of the NewsPublisher form, MODX will remove them when the form is submitted.</p>


<p>The NewsPublisherEditor Policy is based on the NewsPublisherPolicyTemplate, which in turn is based on the Administrator Policy Template, but with the addition of the <code>allow_modx_tags</code> permission. Both the Policy and the Policy Template should be installed automatically when you install the NewsPublisher Package.</p>


<h3>Login Redirect</h3>

<p>As of Version 3.0, NewsPublisher checks for login status and redirects users to the Login page if they are not logged in. If you don't want this, you can set the <code>&np_login_redirect</code> System Setting to <code>No</code>. It is set to
    <code>Yes</code> by default. Important: this feature won't work if the NewsPublisher page is protected by a Resource Group Access ACL entry. That ACL entry hides the page so the NewsPublisher snippet never executes. The user will be sent to the error (page not found) page instead.</p>

<p>If <code>&np_login_redirect</code> is set to <code>YES</code>, the <code>np_login_id</code>
    System Setting (in the newspublisher namespace) must be set to the ID of your login page. NewsPublisher will try to do this for you during the install, but if the alias of your login page is not <code>login</code>, you'll have to do it yourself. If you want to use a separate login page for NewsPublisher, use an <code>&np_login_id</code> property in the NewsPublisher snippet tag set to the ID of that page. That will override the System Setting.</p>

<br>

<div class="box">
    <p>If you are a <code>sudo</code> user and are previewing NewsPublisher from the Manager, the login checks and all
        permission checks will be bypassed. To test your permissions, you should logout all users (Manage -> Logout all
        Users on the Manager's top menu) and log in as a non-sudo user.</p>
</div>

<br>

<p>You no longer need to log users in to the <code>mgr</code> context, so you should remove <code>mgr</code> from the
    <code>&contexts</code> property of the NewsPublisher snippet tag and list only front-end contexts there.</p>

<p>Using the <code>&redirectToPrior</code> property in the Login snippet tag to redirect users back to the NewsPublisher
    page is not entirely reliable, since some browsers don't set the <code>$_SERVER[HTTP_REFERER]</code> variable
    properly. It's recommended instead to set the login snippet's <code>&loginResourceId</code> property to the ID of the NewsPublisher
    page.</p>

<p>If you use the Login page only for NewsPublisher, and you have only one NewsPublisher page, you can use the following property in the Login tag to redirect users back the NewsPublisher page (where ## is the ID of the NewsPublisher page): </p>

<pre><fixepre>
    &loginResourceId=`##`
</fixepre></pre>

<p>If necessary, you can have a separate Login page for NewsPublisher. If you do this, be sure to use an <code>&np_login_id</code> property in the NewsPublisher snippet tag set to the ID of your NewsPublisher Login page. </p>

<h3>Editing Existing Resources</h3>

<p>To edit existing resources, simply place a tag for the NpEditThisButton snippet anywhere in the <code>&lt;body>&lt;/body></code> section of your template(s) or in the Resource Content field of a Resource. The button is positioned absolutely in the lower right section of the page. The <code>&right</code> property controls the distance from the right side of the page and the <code>&bottom</code> property controls the distance from the bottom. The default for these properties is `20%`. Like NewsPublisher, the button also responds to security permissions and is not shown on pages the user has no right to edit or save. It also does not show on the NewsPublisher page or the home page. If there are other pages where you would like to hide it, you can include a comma-delimited list of their IDs in the <code>&noShow</code> property of the NpEditThisButton snippet tag.</p>

<p>Because the button will be hidden until you get the permissions correct, it's recommended that you start with the button tag like this:</p>
<pre><fixedpre>
    [[!NpEditThisButton? &debug=`1`]]</fixedpre></pre>

<p>
In debug mode, the button will always show, and if it would normally be hidden, the button itself will display a message explaining why it would not be shown.
</p>

<p>With debug mode off, the button will show on any page that uses the template when the user has <code>edit_document</code> and <code>save_document</code> permissions in general, and <code>save</code> permission for the current resource (unless the page is excluded by the <code>&noshow</code> property.</p>

<p>When the <code>ownpagesonly</code> property is set, the button will show only on pages created by the current user (based on the resource's <code>createdon</code> field).</p>

<h3>Altering the Form</h3>

<p>You can make many changes to the look of the form using CSS rules for styling. You can find the CSS file at assets/components/newspublisher/css/newspublisher.css. Using CSS, you can change the text color, background color, size, and/or position of any field, though the control of richtext fields is limited. You can put fields side-by-side by using &quot;display:inline;&quot; for the appropriate field(s). If you plan to make changes, it's recommended that you make a copy of the CSS file, the <code>assets/components/newspublisher/css</code> directory and put the name of your new file in the <code>&cssfile</code> property.</p>

<p>If you feel you must, you can alter the Tpl chunks for any of the field types. Again, you should duplicate the existing chunk and put the name of your duplicate in the appropriate property. Be careful not to change the prefixes of any of the placeholders in the Tpl chunks, even if you specify a custom prefix for the form as a property. The prefixes will be altered automatically by the snippet. Note that there are both <code>np.</code> and <code>npx.</code> prefixes. The <code>npx.</code> prefixes are used internally by the snippet, the <code>np.</code> prefixes are usually in the value field of the element and will be set via placeholders.
</p>

<h3>NewsPublisher Tabs</h3>

<p>As of NewsPublisher 1.4.1, you can show the Resource fields on separate tabs like in the Manager (thanks to Gregor Å ekoranja). The tabs and fields can be in any order and any field can go on any tab. You can have as many tabs as you want. The names of the tabs are arbitrary. Whatever names you use will be displayed in the tab menu on the form.</p>

<p>Set <code>&usetabs=`1`</code> in the NewsPublisher snippet tag and include a <code>&tabs</code> property in the following form:</p>

<pre><fixedpre>
&tabs=`{
    "Main" :    ["pagetitle","introtext","content"],
    "Dates" :   ["pub_date", "unpub_date"],
    "Publish" : ["publish"],
    "TVs" :     ["MyTv1","MyTv2"]
}`
</fixedpre></pre>

<p>Be very careful when entering the tabs. The whitespace is ignored (it could be all on one line), but the format is very particular. You will get an error message if the format is wrong. Here are some guidelines:</p>
<ul>
    <li>You must use double quotes</li>
    <li>The tab names go on the left</li>
    <li>The fields to show on each tab go on the right</li>
    <li>The tab names and field names must be separated by a colon</li>
    <li>All the field names must be in the <code>&show</code> property</li>
    <li>Every tab name and field name must be enclosed in double quotes</li>
    <li>The field list must be enclosed in square brackets</li>
    <li>The Field names must be separated by commas (but no comma inside the brackets at the end of the list)</li>
    <li>All the tab lines <b>except</b> the last one must end with a comma</li>
    <li>The whole list must be surrounded by curly braces inside of back-ticks (<code>`{ }`</code>)</li>


</ul>

<p>The Tab names are on the left, and you can use any names you like and as many or as few tabs as you need. NewsPublisher will add a &quot;Show All&quot; button that will show all fields at once. If you include a field that is not in the <code>&show</code> property, you'll see an error message telling you that the tab field can't be found. If there is a field in the <code>&show</code> property that is not in your <code>&tabs</code> list, it will go on the &quot;Other&quot; tab (which will not be shown if all the fields are accounted for).</p>

<h3>Duplicate Button</h3>

<p>If the <code>&duplicatebutton</code> property is set to <code>1</code>, a &quot;Duplicate&quot; button will be shown at the bottom of the NewsPublisher form. When the user clicks on the button, the page currently being edited will be duplicated and the user will be forwarded to the NewsPublisher page to edit the duplicate. Changes made to the original before duplication will be saved before it is duplicated.</p>

<h3>Delete Button</h3>

<p>If the <code>&deletebutton</code> property is set to <code>1</code>, a &quot;Delete&quot; button will be shown at the bottom of the
NewsPublisher form. When the user clicks on the button, the page currently being edited will be deleted. Children of the resource will be deleted as well.  If the <code>&confirmdelete</code> property is set to <code>1</code> (this is the default), a dialog will pop up asking the user to confirm the decision and warning that children will be deleted. If the <code>&confirmdelete</code> property is set to <code>0</code>, the resource (and any children) will be deleted immediately.</p>


<h3>Plugins with NewsPublisher</h3>

<p>NewsPublisher calls either the <code>resource/create</code> processor (for new docs) or the <code>resource/update</code> processor (for existing ones). Those processors fire the <code>OnBeforeDocFormSave</code> event just before saving the resource and the <code>OnDocFormSave</code> event just after a successful save of the resource.</p>

<p>You can attach plugins to either event to perform any extra processing you need. Any existing plugins attached to those events will also execute when the resource is saved. </p>

<p>The usual variables are available in the plugin (<code>$id</code>, <code>$resource</code>, and <code>$mode</code>). The <code>$resource</code> variable is a reference to the resource object itself, so you can check its fields and modify it at will. If the plugin is attached to <code>OnDocFormSave</code>, remember to save the Resource object again after making any changes to it.</p>

<h3>Launch Notify</h3>
<p>If the <code>&shownotify</code> property is set to <code>1</code>, the &quot;Launch Notify&quot; option will be shown in the form. If it is selected, after the NewsPublisher form is successfully submitted, the user will be forwarded to the Notify form to send email notifying users of the new or updated page. There will also be radio buttons to allow the user to select a Notify Tpl chunk to use for the email.</p>

<p>In order for Notify to work properly, the user must have <code>view_user</code> permission in the front end and must have access these three pages in the front-end context:</p>

<ul>
    <li>Notify</li>
    <li>NotifyPreview</li>
    <li>NotifyStatus</li>
</ul>

<p>Unless the user has the <code>view_unpublished</code> permission, the three pages must also be published, though they can be hidden from menus. If you are using tabs for the NewsPublisher display, you may have to select the &quot;Show All&quot; tab in order to see the &quot;Launch Notify&quot; section.</p>

<p>Notify requires the installation of the Subscribe extra, so be sure that it's installed if you want to use Notify.</p>


<h3>Configuring NewsPublisher</h3>

<p>NewsPublisher has many options, but almost all of them are optional. You can see the list by editing the NewsPublisher snippet and clicking on the Properties tab. Unlock the default properties by clicking on the &quot;Default Properties Locked&quot; button. Then, click the little plus sign next to a property to see what it does. It is <b>strongly</b> recommended that you not change the default properties on the Properties tab of the snippet. Either put properties in the snippet tag to override them, or create a property set by clicking on the &quot;Add Property Set&quot; button and specify it in the snippet tag like this:</p>

<pre><fixedpre>
    [[!NewsPublisher@PropertySetName]]
</fixedpre></pre>


<h3>Common Properties</h3>
<p>Here are some of the most commonly used properties &mdash; all are optional, but a few are necessary if other options are set:</p>


<p><code>&show</code> &mdash; (string) Comma-separated list of fields to show.

<p>Example: <code>&show=`pagetitle,longtitle,pub_date,unpub_date,content,MyTv1,MyTv3`</code></p>

<p><code>&captions</code> &mdash; (string) Comma-separated list of fieldnames:fieldcaptions. All standard resource fields are in all lowercase.</p>

<p>Example: <code>&captions=`introtext:Summary,content:Enter Your Post`</code></p>

<p><code>&aliastitle</code> &mdash; (0/1) Use this if you want an automatic alias for your resources
    (a hyphenated, lowercase version of the pagetitle).</p>

<p><code>&aliasprefix</code> &mdash; (string) prefix for aliases, used only if alias is empty. Alias
    will be prefix + raw unix timestamp, unless <code>&aliasdateformat</code> is set.</p>

<p><code>&aliasdateformat</code> &mdash; (string) Format for alias timestamp. If alias is empty
    and this is set, the alias will be the prefix (if any) + a formatted date/time.
    It's strongly recommended to include minutes and seconds in this to avoid
    duplicate aliases.</p>

<p><code>&initrte</code> &mdash; (0/1) Use this if you will be showing any rich text fields.</p>

<p><code>&initfilebrowser</code> &mdash; (0/1) Use this if you want the user to be able to browse for images or files.</p>

<p><code>&rtcontent</code> &mdash; (0/1) Use this if you want richtext editing for the content field.</p>

<p><code>&rtsummary</code>  &mdash; (0/1) Use this if you want richtext editing for the summary field.</p>

<p><code>&initdatepicker</code> &mdash; (0/1) This is required if you will be showing any date fields or TVs.</p>

<p><code>&parentid</code> &mdash; (integer) ID of the parent for new pages; defaults to NewsPublisher page. If you want to force a particular parent, set this and don't include the <code>parent</code> field in the <code>&show</code> property. (For backward compatibility, <code>&parent</code> will also work.)</p>

<p><code>&parents</code> &mdash; comma-separated list of possible parent IDs (must be IDs or Context Keys!) of parents for user to select from; Note: <code>new_document_in_root</code> permission may be necessary for new resources; default: empty. If <code>&parentid</code> is set, it will be selected in the list.</p>

<p><code>&duplicatebutton</code> &mdash; (0/1) If set to <code>1</code>, a &quot;Duplicate&quot; button will be placed at the bottom of the form.</p>

<p><code>&deletebutton</code> &mdash; (0/1) If set to <code>1</code>, a &quot;Delete&quot; button will be placed at the bottom of the
form.</p>

<p><code>&confirmdelete</code> &mdash; (0/1) If set to <code>1</code> (the default), a dialog will pop up asking the user to confirm the decision and warning that children will be deleted.</p>

<p>
<code>&templateid</code> &mdash; (mixed) The name or ID of the template to be assigned to new docs. Can also be set to 'Parent' to assign the parent's template; default: default_template System Setting. To force a particular template, set this, and don't put the <code>template</code> field in the <code>&show</code> property. (For backward compatibility, <code>&template</code> will also work.)</p>

<p>
<code>&templates</code> &mdash; comma-separated list of IDs (must be IDs!) of Templates for user to select from; default: empty. If <code>&template</code> is also set, it will be selected in the list.</p>

<h3>Page Settings for New Documents</h3>
<p>The next five properties control the standard page settings of the resource being created (whether you show them or not). They can each be set to `1`, `0`, `Parent`, or `System Default` (the default setting). If set to `Parent`, the settings of the resource's parent will be used (and the <code>&parentid</code> property must be set). If left unset, the MODX System Settings will be used for each one. Note that the published setting may be overridden if you show <code>pub_date</code> or <code>unpub_date</code> in the form and the user sets them.

<pre><fixedpre>
&published_default
&hidemenu_default
&cacheable_default
&searchable_default
&richtext_default</fixedpre></pre>

<a id="np_presets"></a>

<h3>Presets Property</h3>

<p>You can preset values for new documents using the <code>&presets</code> property in the NewsPublisher snippet tag. This will work for most resource fields and TVs. The property must be in this form:</p>

<pre><fixedpre>
&presets=`content:Some default content,introtext:My preset introtext`
</fixedpre></pre>

<p>In each of the comma-separated pairs, the left side of the <code>:</code> is the lowercase name of the field or the name or ID of a TV. The right side of the <code>:</code> is the preset value you want in the field.</p>

<p><b>Important:</b> To have a preset, a field must be in the <code>&show</code> property and must be spelled exactly the same way in both the <code>&show</code> property and the <code>&presets</code> property. In both cases, it must be the actual name of the database field (e.g., <code>introtext</code>, *not* <code>summary</code>, and *not* the value you use for a custom caption. </p>


<h3>Tpl Properties</h3>

<p>These are the properties you can use to tell NewsPublisher to use your custom Tpl chunk instead of the built-in one. Generally, the property is the name of the built-in chunk, minus the 'np' prefix:</p>

<ul>
    <li><code>&errortpl</code></li>
    <li><code>&fielderrortpl</code></li>
    <li><code>&outertpl</code></li>
    <li><code>&datetpl</code></li>
    <li><code>&booltpl</code></li>
    <li><code>&listoutertpl</code></li>
    <li><code>&listoptiontpl</code></li>
    <li><code>&optionoutertpl</code></li>
    <li><code>&optiontpl</code></li>
    <li><code>&texttpl</code></li>
    <li><code>&textareatpl</code></li>
    <li><code>&inttpl</code></li>
    <li><code>&filetpl</code></li>
    <li><code>&imagetpl</code></li>
    <li><code>&richtexttpl</code></li>
    <li><code>&fielderrortpl</code></li>
    <li><code>&tinymceinittpl</code></li>
    <li><code>&elfinderinittpl</code></li>
</ul>

<h3>Less Common Properties</h3>

<p><b>NewsPublisher Snippet</b></p>
<p>
<code>&stopOnBadTv</code> &mdash; (0/1) Stop and print an error message if a TV in the &show property is not attached to the Template being used; if you set this to `0`, unattached TVs will be ignored and the form will display normally without them; default: `1`.</p>

<p><code>&allowedtags</code> &mdash; HTML tags allowed in text fields; default: <fixedpre>`<p><br><a><i><em><b><strong><pre><table><th><td><tr><img><span><div><h1><h2><h3><h4><h5><font><ul><ol><li><dl><dt><dd><object><blockquote><code>`</fixedpre>.</p>


<p><code>&prefix</code> &mdash; (string) a custom prefix to use for placeholders; default: `np`.
    This property is only necessary if the placeholders conflict with
    other placeholders on the page.
    Important: Do not include a dot in your custom prefix.</p>

<p><code>&cssfile</code> &mdash; (string) Path to a custom CSS file. Set to `0` for no CSS file if you want to put the CSS in your site's master CSS file.</p>

<p><code>&groups</code> &mdash; (string) A comma-separated list of resource groups to assign new pages to. Can also be set to `Parent` to use the
    parent's groups.</p>

<p><code>&tinyheight</code> &mdash; (string) Height of the RTE window; defaults to 400px.</p>

<p><code>&tinyWidth</code> &mdash; (string) Width of the RTE window; defaults to 95%.</p>

<p><code>&required</code> &mdash; (string) Comma-separated list of required field names or TVs.
    Important: Do not set this for Checkbox, list, or radio TVs or
    for boolean (0/1) resource fields (like the five above).</p>

<p><code>&cancelid</code> &mdash; (integer) ID of the page the user will be forwarded to on cancel. If you don't want a cancel button, just remove it from the npOuterTpl chunk.</p>

<p><code>&badwords</code> &mdash; (string) Comma-separated list of words to be filtered from fields.</p>

<p><code>&listboxmax</code> &mdash; (integer) maximum size of listboxes. Overflow will scroll; default: 8.</p>

<p><code>&readonly</code> &mdash; (string) Comma-separated list of readonly fields. Does not work with
    listbox, checkbox, radio, or richtext fields. The <code>id</code> field is always readonly.

<p><code>&intmaxlength</code> &mdash; (integer) Max length for integer input fields; default: 10.</p>

<p><code>&textmaxlength</code> &mdash; (integer) Max length for text input fields; default: 60.</p>

<p><code>&hoverhelp</code> &mdash; (0/1) Show help when hovering over field caption (but not the
    field itself); default: `1`. The MODX help strings are shown for
    resource fields. For TVs, the TV description is shown.</p>

<p><code>&language</code> &mdash; (string) language to use for form; defaults: (in order of application) cultureKey, manager_language, en.</p>

<p><code>&classkey</code> &mdash; (string) Class key for new documents; only necessary if you have extended the resource object for a custom resource class or are editing Articles blog posts.</p>

<p><code>&usetabs</code> &mdash; (0/1 - optional) If set, displays the fields on separate tabs.</p>
<p><code>&tabs</code> &mdash; (JSON string - required if <code>&usetabs</code> is set) JSON string specifying which fields go on which tabs. Unlisted fields will go on the &quot;Other&quot; tab; See the example above.</p>

<p><code>&activetabs</code> &mdash; (string - optional) If set, determines the tab shown when the form is loaded; if left out, all tabs are shown.</p>

<p><code>&shownotify</code> &mdash; (0/1 - optional) If set, the &quot;Launch Notify&quot; option is set. If selected, Notify will be launched for the resource on successful submission; default: 0.</p>

<p><code>&amp;notifychecked</code> &mdash; (0/1 - optional) If is this option and <code>&shownotify</code> are set, the &quot;Launch Notify&quot; option will be checked by default; default: 0.</p>


<p><b>NpEditThisButton Snippet</b></p>

<p>
<code>&editHome</code> &mdash; (0/1) Allow edit button to show on the home page; default: `0`.</p>


<h3>Multiple NewsPublisher Pages</h3>

<p>If you would like to have different NewsPublisher pages with different fields and settings, create a separate page for each one with a different snippet tag on each page. The NpEditThisButton, by default launches the page specified in its <code>&np_id</code> property. If you use the following snippet tag for the button, you can have it launch the appropriate NewsPublisher page by creating a TV for each page called NpId and setting the correct NewsPublisher page ID in it:</p>

<pre><fixedpre>
    [[!NpEditThisButton? &np_id=`[[*NpId]]`</fixedpre></pre>

<h3>NewsPublisher and getResources</h3>

<p>As of NewsPublisher 1.2.0, you can put the edit button tag in the getResources Tpl chunk and have an edit button for each resource retrieved using the <code>&np_edit_id property</code>. You can also hard-code a page with multiple NpEditThisButton tags. To use this technique with getResources, remove any NpEditThisButton tags from the page template and create a Tpl chunk something like this:</p>

<pre><fixedpre>
<div class="MyItem">
    [[+pagetitle]]
    [[+introtext]] . . . [[!NpEditThisButton? &np_edit_id=`[[+id]]` ]]
</div>
</fixedpre></pre>

<p>This is handy if you'd like to present a list of resources that the user might want to edit with NewsPublisher.</p>

<p>As of version 3.1.0 you can combine the technique above with <code>&ownpagesonly</code> by adding this property to the NpEditThisButton tag example above:</p>

<pre><fixedpre>
    [[!NpEditThisButton? &np_edit_id=`[[+id]]` &createdby=`[[+createdby]]` ]]

</fixedpre></pre>


<h3>NewsPublisher and Articles</h3>

<p>As of version 1.4.0, NewsPublisher can be used to edit Articles blog posts in the front end. You can put the <fixedpre>[[!NpEditThisButton]]</fixedpre> tag in your blog post template and the <code>Edit</code> button will show up on the blog page. You will not be able to edit comments in NewsPublisher.</p>

<p>Important: If you will be using NewsPublisher for Articles, be sure to set all of the following properties in the NewsPublisher tag:</p>
<ul>
    <li><code>&parentid</code> &mdash; The ID of the Articles container</li>
    <li><code>&templateid</code> &mdash; The ID of the blog post template</li>
    <li><code>&classkey</code> &mdash; `Article`</li>
    <li><code>&hidemenu</code> &mdash; `1`</li>
</ul>

<p>Remember that all the resources you create with this NewsPublisher tag will be blog posts. If you want to also create regular resources, you'll need another NewsPublisher page with its own tag and you'll need to use a different <code>&np_id</code> value in the NpEditThisButton tag in the different templates so the button will redirect to the correct NewsPublisher page.</p>

<p>NewsPublisher should also work with other Custom Resource Classes as long as they are implemented properly, but I haven't had an opportunity to test it with anything but Articles.</p>

<a id="np_configuring_elfinder"></a>

<h3>Configuring elFinder</h3>

<p>NewsPublisher 3.0 uses the <a href="https://github.com/Studio-42/elFinder/wiki">elFinder Browser</a>.</p>

<p>If you don't want users to see the file browser at all, uncheck the <code>file_manager</code> permission in the
    NewsPublisherEditor Policy (or whatever policy you have assigned for your NewsPublisher users).</p>

<p>If you do want to enable the file browser, you must also set the new <code>&initfilebrowser</code> property of the
    NewsPublisher snippet to <code>Yes</code> (in addition to checking the <code>file_manager</code> permission).</p>


<p>To configure the elFinder Browser, see the properties of the npElFinderConnector snippet. As always, you should create a property set if you want to change any of the default values to prevent them from being overwritten when you upgrade NewsPublisher. Most of the properties there are self-explanatory.</p>

<p>In particular, you'll want to check the <code>&disableCommands</code> property. It contains a long list of commands that are disabled in the file browser. The ability to upload files, for example, is disabled by default and the upload button won't appear in the file browsers. To let users upload files, remove <code>,upload</code> from the <code>&disableCommand</code> property. See the description of the property for a list of possible commands. To allow users to access a specific feature, simply remove it from the list. The elFinder browser will automatically show icons for any commands that are *not* disabled.</p>

<p>The <code>&browserBasePath</code> and <code>&browserBaseURL</code> properties of the npElfinderConnector snippet are set to the <code>assets</code> directory. You may want to change them, but be sure they match. Users will not be able to browse above them.</p>

<p>The <code>&browserStartPath</code> and <code>&browserStartURL</code> properties allow the browser to open in a lower directory. The two must match. Users will be able to browse above them, but only up to the <code>&browserBasePath</code> and <code>&browserBaseURL</code> directories.</p>

<p>There are also new System Settings in the <code>newspublisher</code> namespace that are used to configure elFinder: <code>np_elfinder_remember_last_dir</code>,
    <code>np_elfinder_theme</code>, <code>np_elfinder_tmb_size</code>, <code>np_elfinder_height</code>, and <code>np_elfinder_width</code>.</p>

<p>If <code>np_elfinder_remember_last_dir</code> is set to <code>Yes</code> (it's <code>No</code> by default), elFinder will open in the directory that was last accessed, though users can still browse above it up to the directory set in the <code>&browserBasePath</code> and <code>&browserBaseURL</code> properties of the npElfinderConnector snippet.</p>

    <p>The <code>np_elfinder_theme</code> setting description lists the built-in themes, but you can add your own if you like. They go in the <code>assets\components\newspublisher\elfinder\elfinderthemes</code> directory. The only file loaded is elfinderthemes/<i>theme name</i>/css/theme.css, which sometimes uses other files in the same directory.</p>

<p>The default elFinder theme is <code>osx</code>, which I think is the most attractive. The other themes are not always reliable. The <code>windows-10</code> theme, for example, hides the <code>X</code> that closes the window, though you can still click on the invisible <code>X</code> to close the window. You're welcome to fix problems you find with any of the themes and contribute them to future NewsPublisher releases. The <code>moono</code> theme seems to work well, but it you have to right-click on the images to see a preview. The themes may look slightly different in TinyMCE than they do for file and image TVs because TinyMCE controls the border and the title background.</p>

    <p>The <code>np_elfinder_tmb_size</code> setting controls the size of the elFinder thumbnails. It's in pixels and the image is always square. The default is 48px. If you want to change that, you should do it before launching elFinder or uploading any images. If you forget, you can simply delete the existing thumbs. They are placed below each directory the images are in and are in a subdirectory named <code>.tmb</code>, unless you've changed the <code>&tmbPath</code> property of the npElFinderConnector snippet. You can use the elFinder thumbnails in your HTML code, but since their names are hashed, it's a pain, and it's not very well documented. I recommend using phpThumb or one of its replacements (e.g., phpThumbOf, or pThumb) for thumbnails.</p>

<p>The <code>np_elfinder_height</code>, and <code>np_elfinder_width</code> settings are expressed as percentages of the screen height and width. The default is 80 for both. Use a whole number. Do not include the percent sign. </p>

<p>You can also edit the code of the npelFinderInitTpl chunk to alter elFinder in more advanced ways, though typically, the supplied properties should do most of what you want. Get elFinder working first. To modify it, create a duplicate chunk and specify its name in the <code>&elfinderinittpl</code> property of the NewsPublisher snippet tag.</p>

<p>One use-case for modifying elFinder would be allowing users to browse in and under more than one directory (i.e., multiple roots). This requires modifying the npElFinderConnector snippet code. If you do this, duplicate the snippet and modify the tag on the npElFinderConnector Resource to point to your duplicate. See the docs <a href="https://github.com/Studio-42/elFinder/wiki/Multiple-Roots">here</a> for an example. Note that this will not apply to any TVs. For TVs, the user's browsing will always be limited to the baseURL/basePath of each TV's Media Source. One great feature of elFinder using multiple roots is that the user can have different capabilities in each root. You might, for example, have one directory where users can only upload files and another where they can only download files. This would not be possible with the MODX file browser.</p>

<a id="np_configuring_tinymce"></a>

<h3>Configuring TinyMCE</h3>

<p>NewsPublisher 3.0 loads <a href="https://www.tinymce.com/docs/">TinyMCE 4</a> directly from <a href="tinymce.com">tinymce.com</a>.</p>

<p>There are three properties that affect TinyMCE in the NewsPublisher snippet properties: <code>tinyheight</code>, <code>tinywidth</code>, and <code>tinysource</code>. Their descriptions explain what each one does. You don't need to set these properties unless you want to change the defaults. You can change the <code>&tinysource</code> property to load TinyMCE 4 from another location.</p>

<p>There is also a System Setting for the TinyMCE skin: <code>np_tinymce_skin</code>. The setting is in the <code>newspublisher</code> namespace on the System Settings grid. The built-in themes are listed in the description, but you're welcome to add additional themes. They go in the <code>assets/components/newspublisher/tinymceskins</code> directory.

<p>For more fine-grained control of TinyMCE, you can edit the npTinyMCEInitTpl chunk, which contains initialization code for TinyMCE. If you want to do this, be sure to duplicate the chunk, then specify the duplicate's name in the <code>&tinymceinittpl</code> property of the NewsPublisher snippet. You may want to modify the plugins and toolbar sections to customize TinyMCE.</p>

<p>There is also some TinyMCE initialization code your can modify in the npRichTextTpl chunk. Changes there will only affect Richtext TVs. If you make changes in the
    npTinyMCEInitTpl, you may (or may not) want to modify the npRichTextTpl chunk to match.</p>

<br>
<h2>NewsPublisher Settings and Properties</h2>

<p>The following four tables include all of the properties and System Settings for NewsPublisher and its various
    components.</p>


<a id="np_SettingsTable"></a>

<h3>NewsPublisher System Settings</h3>

<p>To edit these settings, go to System (gear icon) -> System Settings and select <code>newspublisher</code> in the &quot;Namespace&quot; input field.</p>


<table class="properties">
    <tr><th>Setting</th><th>Description</th><th>Default</th></tr>
<tr><td colspan="3" class="properties_header">NewsPublisher</td></tr>
    <tr>
        <td>np_login_redirect</td>
        <td>If set to Yes, not-logged-in users will be directed to the login page; use &loginResourceId=`##` (where ## is the ID of the NewsPublisher page) in the login tag to bounce users back to newspublisher after login</td>
        <td>1</td>
    </tr>
    <tr>
        <td>np_login_id</td>
        <td>ID of login page; used to redirect not-logged-in users</td>
        <td></td>
    </tr><tr><td colspan="3" class="properties_header">TinyMCE</td></tr>
    <tr>
        <td>np_tinymce_skin</td>
        <td>Skin directory for TinyMCE skin in assets/components/newspublisher/tinymceskins; built-in options: modxPericles, fairOphelia, fallenMacbeth, light</td>
        <td>modxPericles</td>
    </tr><tr><td colspan="3" class="properties_header">elFinder</td></tr>
    <tr>
        <td>np_elfinder_tmb_size</td>
        <td>Thumb size for elFinder in NewsPublisher (in pixels)</td>
        <td>48</td>
    </tr>
    <tr>
        <td>np_elfinder_remember_last_dir</td>
        <td>Make elFinder remember last directory browsed (must be the string true or false)</td>
        <td>false</td>
    </tr>
    <tr>
        <td>np_elfinder_theme</td>
        <td>Theme for elFinder to use in NewsPublisher; built-in themes include: osx, windows-10, moono, material</td>
        <td>osx</td>
    </tr>
    <tr>
        <td>np_elfinder_height</td>
        <td>Height of elFinder window as percent of screen size</td>
        <td>80</td>
    </tr>
    <tr>
        <td>np_elfinder_width</td>
        <td>Width of elFinder window as percent of screen size</td>
        <td>80</td>
    </tr>
    <tr>
        <td>np_media_source_var</td>
        <td>Name for Media Source $_GET variable sent from NewsPublisher to the file browser</td>
        <td>media_source</td>
    </tr>
</table>


<br>
<a id="np_propertiesTable"></a>

<h3>NewsPublisher Snippet Properties</h3>

<table class="properties">
    <tr><th>Property</th><th>Description</th><th>Default</th></tr>
<tr><td colspan="3" class="properties_header">NewsPublisher Control Settings</td></tr>
    <tr>
        <td>activetab</td>
        <td>(optional) Tab to show when form is loaded</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>allowedtags</td>
        <td>(optional) Tags allowed in text fields</td>
        <td>&lt;p&gt;,<wbr>&lt;br&gt;,<wbr>&lt;a&gt;,<wbr>&lt;i&gt;,<wbr>&lt;em&gt;,<wbr>&lt;b&gt;,<wbr>&lt;strong&gt;,<wbr>&lt;pre&gt;,<wbr>&lt;table&gt;,<wbr>&lt;th&gt;,<wbr>&lt;td&gt;,<wbr>&lt;tr&gt;,<wbr>&lt;img&gt;,<wbr>&lt;span&gt;,<wbr>&lt;div&gt;,<wbr>&lt;h1&gt;,<wbr>&lt;h2&gt;,<wbr>&lt;h3&gt;,<wbr>&lt;h4&gt;,<wbr>&lt;h5&gt;,<wbr>&lt;font&gt;,<wbr>&lt;ul&gt;,<wbr>&lt;ol&gt;,<wbr>&lt;li&gt;,<wbr>&lt;dl&gt;,<wbr>&lt;dt&gt;,<wbr>&lt;dd&gt;,<wbr>&lt;object&gt;,<wbr>&lt;blockquote&gt;,<wbr>&lt;code&gt;,<wbr></td>
    </tr>
    <tr>
        <td>badwords</td>
        <td>(optional) Comma delimited list of words not allowed in document</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>cancelid</td>
        <td>(optional) Document ID to load on cancel</td>
        <td>http_referer</td>
    </tr>
    <tr>
        <td>captions</td>
        <td>(optional) Custom captions -- Comma-separated list of FieldNames:FieldCaptions. Example: &captions=`introtext:Summary,content:Enter Your Post`</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>clearcache</td>
        <td>(optional) When set to Yes, NewsPublisher will clear the site cache after saving the resource</td>
        <td>1</td>
    </tr>
    <tr>
        <td>contentcols</td>
        <td>(optional) Columns to show in Content field</td>
        <td>60</td>
    </tr>
    <tr>
        <td>contentrows</td>
        <td>(optional) Rows to show in Content field</td>
        <td>10</td>
    </tr>
    <tr>
        <td>cssfile</td>
        <td>(optional) Name of CSS file to use, or `` for no CSS file; File should be in assets/newspublisher/css/ directory</td>
        <td>newspublisher.css</td>
    </tr>
    <tr>
        <td>groups</td>
        <td>(optional) Comma-separated list of resource groups to put new document in (no effect with existing docs); set to `parent` to use parent's groups</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>hoverhelp</td>
        <td>(optional) Show help when hovering over field caption</td>
        <td>1</td>
    </tr>
    <tr>
        <td>initdatepicker</td>
        <td>(optional) Initialize date picker; set this if there are any date fields</td>
        <td>1</td>
    </tr>
    <tr>
        <td>initfilebrowser</td>
        <td>Initialize file browser for use in RTE and file/image TVs</td>
        <td>0</td>
    </tr>
    <tr>
        <td>initrte</td>
        <td>(optional) Initialize rich text editor; set this if there are any rich text fields</td>
        <td>0</td>
    </tr>
    <tr>
        <td>intmaxlength</td>
        <td>(optional) Max length for integer input fields</td>
        <td>10</td>
    </tr>
    <tr>
        <td>language</td>
        <td>(optional) Language to use in forms and error messages</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>listboxmax</td>
        <td>(optional) Maximum length for listboxes</td>
        <td>8</td>
    </tr>
    <tr>
        <td>multiplelistboxmax</td>
        <td>(optional) Maximum length for multi-select listboxes</td>
        <td>20</td>
    </tr>
    <tr>
        <td>parents</td>
        <td>Comma-separated list of parent IDs for user to select from (must be IDs or Context keys); If &parentid is sent, it will be selected in the list. Note: new_document_in_root permission may be necessary for new resources)</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>postid</td>
        <td>(optional) Document ID to load on success</td>
        <td>the page created or edited</td>
    </tr>
    <tr>
        <td>prefix</td>
        <td>(optional) Prefix to use for placeholders</td>
        <td>np</td>
    </tr>
    <tr>
        <td>readonly</td>
        <td>(optional) Comma-separated list of fields that should be read only; does not work with option or textarea fields</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>required</td>
        <td>(optional) Comma separated list of fields/tvs to require</td>
        <td>pagetitle,content</td>
    </tr>
    <tr>
        <td>rtcontent</td>
        <td>(optional) Use rich text for the content form field</td>
        <td>0</td>
    </tr>
    <tr>
        <td>rtsummary</td>
        <td>(optional) Use rich text for the summary (introtext) form field</td>
        <td>0</td>
    </tr>
    <tr>
        <td>show</td>
        <td>(optional) Comma separated list of fields/tvs to show</td>
        <td>pagetitle,<wbr>longtitle,<wbr>hidemenu,<wbr>published,<wbr>description,<wbr>menutitle,<wbr>pub_date,<wbr>unpub_date,<wbr>introtext,<wbr>content</td>
    </tr>
    <tr>
        <td>stopOnBadTv</td>
        <td>(optional) If set to No, &show can contain TVs not attached to the current template without an error</td>
        <td>1</td>
    </tr>
    <tr>
        <td>stopOnNoRte</td>
        <td>(optional) If set to No, &show can contain richtext fields without an error when initrte is off</td>
        <td>1</td>
    </tr>
    <tr>
        <td>summarycols</td>
        <td>(optional) Number of columns for the summary field</td>
        <td>60</td>
    </tr>
    <tr>
        <td>summaryrows</td>
        <td>(optional) Number of rows for the summary field</td>
        <td>10</td>
    </tr>
    <tr>
        <td>tabs</td>
        <td>(required only if usetabs is set) Specification for tabs (see tutorial)</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>templates</td>
        <td>(optional) Comma-separated list of template IDs for user to select from (must be IDs); if &template is set, it will be selected in the list</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>textmaxlength</td>
        <td>(optional) Max length for text input fields</td>
        <td>60</td>
    </tr>
    <tr>
        <td>tinyheight</td>
        <td>(optional) Height of richtext areas</td>
        <td>400px</td>
    </tr>
    <tr>
        <td>tinysource</td>
        <td>Source to load TinyMCE from</td>
        <td>//cdn.tinymce.com/4/tinymce.min.js</td>
    </tr>
    <tr>
        <td>tinywidth</td>
        <td>(optional) Width of richtext areas</td>
        <td>95%</td>
    </tr>
    <tr>
        <td>usetabs</td>
        <td>(optional) Show tabbed display</td>
        <td>0</td>
    </tr>
    <tr>
        <td>which_editor</td>
        <td>Rich-text editor to use; at present, TinyMCE is the only value that will work</td>
        <td>TinyMCE</td>
    </tr><tr><td colspan="3" class="properties_header">Resource Field Settings</td></tr>
    <tr>
        <td>aliasdateformat</td>
        <td>(optional) Format string for auto date alias -- see tutorial</td>
        <td>PHP date + time format</td>
    </tr>
    <tr>
        <td>aliasprefix</td>
        <td>(optional) Prefix to be prepended to alias for new documents with an empty alias; alias will be aliasprefix - timestamp</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>aliastitle</td>
        <td>(optional) Set to Yes to use lowercase, hyphenated, page title as alias. If set to No, 'article-(date created)' is used. Ignored if alias is filled in form</td>
        <td>1</td>
    </tr>
    <tr>
        <td>cacheable</td>
        <td>(optional) Sets the flag that determines whether or not the resource is cached; for new resources, set to `Parent` to use parent's setting</td>
        <td>System Default</td>
    </tr>
    <tr>
        <td>classkey</td>
        <td>(optional) Class key for new resources; use only if you have subclassed resource or are using this for Articles (set to Article)</td>
        <td>modDocument</td>
    </tr>
    <tr>
        <td>hidemenu</td>
        <td>(optional) Sets the flag that determines whether or not the new page shows in the menu; for new resources, set to `Parent to use parent's setting</td>
        <td>System Default</td>
    </tr>
    <tr>
        <td>parentid</td>
        <td>(optional) Folder ID where new documents are stored</td>
        <td>NewsPublisher folder; to force a parent, set this and do not show the parent field</td>
    </tr>
    <tr>
        <td>presets</td>
        <td>Preset values for new document fields in this form: `content:Some default content,introtext</td>
        <td>introtext`</td>
    </tr>
    <tr>
        <td>published</td>
        <td>(optional) Set new resource as published or not (will be overridden by publish and unpublish dates). Set to `parent` to match parent's pub status</td>
        <td>System Default</td>
    </tr>
    <tr>
        <td>richtext</td>
        <td>(optional) Sets the flag that determines whether or Rich Text Editor is used to when editing the page content in the Manager; for new resources, set to `Parent` to use parent's setting</td>
        <td>System Default</td>
    </tr>
    <tr>
        <td>searchable</td>
        <td>(optional) Sets the flag that determines whether or not the new page is included in site searches; for new resources, set to `Parent` to use parent's setting</td>
        <td>System Default</td>
    </tr>
    <tr>
        <td>template</td>
        <td>(optional) Name or ID of template to use for new document; for new resources, set to `Parent` to use parent's template; for `parent`, &parentid must be set</td>
        <td>the default_template System Setting</td>
    </tr><tr><td colspan="3" class="properties_header">Tpls</td></tr>
    <tr>
        <td>booltpl</td>
        <td>(optional) Tpl used for Yes/No resource fields (e.g., published, searchable, etc.)</td>
        <td>npBoolTpl</td>
    </tr>
    <tr>
        <td>datetpl</td>
        <td>(optional) Tpl used for date resource fields and date TVs</td>
        <td>npDateTpl</td>
    </tr>
    <tr>
        <td>elfinderinittpl</td>
        <td>(optional) Tpl used to initialize elFinder</td>
        <td></td>
    </tr>
    <tr>
        <td>errortpl</td>
        <td>(optional) Name of Tpl chunk for formatting field errors. Must contain [[+np.error]] placeholder</td>
        <td>npErrorTpl</td>
    </tr>
    <tr>
        <td>fielderrortpl</td>
        <td>(optional) Name of Tpl chunk for formatting field errors. Must contain [[+np.error]] placeholder</td>
        <td>npFieldErrorTpl</td>
    </tr>
    <tr>
        <td>filetpl</td>
        <td>(optional) Tpl used for file TVs</td>
        <td></td>
    </tr>
    <tr>
        <td>imagetpl</td>
        <td>(optional) Tpl used for image TVs</td>
        <td></td>
    </tr>
    <tr>
        <td>inttpl</td>
        <td>(optional) Tpl used for integer resource fields</td>
        <td>npIntTpl</td>
    </tr>
    <tr>
        <td>listoptiontpl</td>
        <td>(optional) Tpl used for each option of listbox TVs</td>
        <td>npListOptionTpl</td>
    </tr>
    <tr>
        <td>optionoutertpl</td>
        <td>(optional) Tpl used for as a shell for checkbox, list, and radio option TVs</td>
        <td>npOptionOuterTpl</td>
    </tr>
    <tr>
        <td>optiontpl</td>
        <td>(optional) Tpl used for each option of checkbox and radio option TVs</td>
        <td>npOptionTpl</td>
    </tr>
    <tr>
        <td>outertpl</td>
        <td>(optional) Tpl used as a shell for the whole page</td>
        <td>npOuterTpl</td>
    </tr>
    <tr>
        <td>richtexttpl</td>
        <td>(optional) Tpl used for richtext TVs</td>
        <td></td>
    </tr>
    <tr>
        <td>texttpl</td>
        <td>(optional) Tpl used for text resource fields</td>
        <td>npTextTpl</td>
    </tr>
    <tr>
        <td>tinymceinittpl</td>
        <td>(optional) Tpl used to initialize TinyMCE</td>
        <td></td>
    </tr>
</table>

<br>
<a id="np_elFinderConnectorTable"></a>

<h3>npElFinderConnector Snippet Properties</h3>
<table class="properties">
    <tr>
        <th>Property</th>
        <th>Description</th>
        <th>Default</th>
    </tr>

    <tr>
        <td>browserBasePath</td>
        <td>Users can browse below this directory, but not above it. Must match browserBaseURL setting</td>
        <td>[[++base_path]]assets</td>
    </tr>
    <tr>
        <td>browserBaseURL</td>
        <td>Users can browse below this URL, but not above it. Must Match browserBasePath settings</td>
        <td>[[++base_url]]assets</td>
    </tr>
    <tr>
        <td>browserStartPath</td>
        <td>Set this to start the browser in a directory below the browserBasePath. Must Match browserStart URL</td>
        <td>browserBasePath</td>
    </tr>
    <tr>
        <td>browserStartURL</td>
        <td>Set this to start browsing in a directory below browserBaseURL. Must match browserStartPath. Required only
            if browserStartPath is set
        </td>
        <td></td>
    </tr>
    <tr>
        <td>disableCommands</td>
        <td>Comma-separated list of commands to disable. To enable a command, delete it from the list.</td>
        <td>archive, download, cut, copy, paste, duplicate, edit, open, mkdir, mkfile, netmount, netunmount, rm, rename,
            quicklook, upload, view
        </td>
    </tr>
    <tr>
        <td>driver</td>
        <td>Driver type for file browser (for future use)</td>
        <td>LocalFileSystem</td>
    </tr>
    <tr>
        <td>locale</td>
        <td>Locale setting. Will use MODX locale System Setting if empty</td>
        <td></td>
    </tr>
    <tr>
        <td>tmbPath</td>
        <td>Path to directory to store thumbnails on upload</td>
        <td>.tmb</td>
    </tr>
    <tr>
        <td>uploadAllow</td>
        <td>Comma-separated list of mime types to allow</td>
        <td>image, text/plain</td>
    </tr>
    <tr>
        <td>uploadAllowOverwrite</td>
        <td>Allow overwriting of existing files when uploading</td>
        <td>1</td>
    </tr>
    <tr>
        <td>uploadMaxSize</td>
        <td>Maximum upload file size. This size is per files. Can be set as number or string with unit 10M, 500K, 1G.
            Note you still have to configure PHP files upload limits
        </td>
        <td>0 (use PHP max size)</td>
    </tr>
</table>

<br>
<a id="npet_propertiesTable"></a>

<h3>NpEditThisButton Snippet Properties</h3>

<table class="properties">
    <tr><th>Property</th><th>Description</th><th>Default</th></tr>

    <tr>
        <td>bottom</td>
        <td>(optional) - distance from bottom of window to place button. Can be in any legal CSS format</td>
        <td>20%</td>
    </tr>
    <tr>
        <td>debug</td>
        <td>(optional) - Displays the button on all pages with either the $buttonCaption, or a message explaining why it would not be shown</td>
        <td>0</td>
    </tr>
        <tr>
        <td>editHome</td>
        <td>(optional) If set to Yes, edit button may be shown on the Home page</td>
        <td>0</td>
    </tr>
    <tr>
        <td>language</td>
        <td>(optional) - Language to use for error messages</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>noShow</td>
        <td>Comma - separated list of IDs of documents on which the button should not be displayed</td>
        <td>IDs of Home page and NewsPublisher page</td>
    </tr>
    <tr>
        <td>np_edit_id</td>
        <td>ID of page to edit (bottom and right properties are ignored -- button is displayed inline). You can use this in an edit button tag in your getResources Tpl chunk to have multiple buttons on a page: <fixedpre>[[!NpEditThisButton? &np_edit_id=`[[+id]]`]]</fixedpre></td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>np_id</td>
        <td>ID of NewsPublisher page (set automatically on first run); If you change the name of the NewsPublisher page, you have to set this manually</td>
        <td>(empty)</td>
    </tr>
    <tr>
        <td>right</td>
        <td>(optional) - Distance from right of window to place button. Can be in any legal CSS format</td>
        <td>20%</td>
    </tr>
    <tr>
        <td>ownpagesonly</td>
        <td>(optional) - Show button only on pages the current user created (uses the resource's <code>createdby</code> field).</td>
        <td>0</td>
    </tr>

</table>

<p>&nbsp;</p>

<h3>Troubleshooting</h3>

<p>If you are using elFinder and have to scroll down to see browser window, check to make sure that you have <code><fixedpre><!DOCTYPE html></fixedpre></code> at the top of your template.</p>

<p>If the NpEditThisButton doesn't work, be sure the NpEditThisButton property <code>np_id</code> is set to the ID of the page with the NewsPublisher snippet tag.</p>

<p>If the TinyMCE rich text editor doesn't work, it may be because you're using a version of TinyMCE in the MODX Manager and viewing the front end from the same browser. This can create a conflict between the two versions of TinyMCE. You can avoid this by testing NewsPublisher using a different browser, where you are not logged in to the Manager. In normal use, your users won't have this problem when using NewsPublisher because they will not be logged in to the MODX Manager.</p>

<p>&nbsp;</p>
<h3>Bugs, Feature Requests, and Questions</h3>

<p>Bugs and feature requests should be reported here: <a href="https://github.com/BobRay/newspublisher/issues">GitHub NewsPublisher Page</a>.</p>

<p>
Questions should be posted in the NewsPublisher topic at <a href="https://community.modx.com">MODX Forums</a>.</p>


<p>&nbsp;</p>



<a id="np_upgrade_notes"></a>

<div class="box">
    <h2>NewsPublisher 3.0 Upgrade Notes</h2>

    <p>NewsPublisher 3.0 has some great new features, but you'll have to do a little work to implement them. <b>If you've changed any of the default Tpl chunks, (you'd never do that, right?) your changes may be lost unless you preserve them by renaming them *before* installing NewsPublisher 3.0</b>.</p>

<h3>New Features Overview</h3>

<p>NewsPublisher no longer depends on extJS/modExt, access to the MODX Manager, or the MODX TinyMCE extra. You don't even have to have the TinyMCE extra installed to use NewsPublisher. NewsPublisher loads TinyMCE 4 directly from tinymce.com (or the location of your choice). The NewsPublisher package includes the elFinder file/image browser and loads JQuery and JQuery-UI from the Web.</p>

<p>NewsPublisher responds properly to the Media Sources of all file, image, and richtext TVs. Users will automatically be restricted to browsing in and below the root of the TV's Media Source. You can also disable the file browser altogether, or easily enable or disable specific commands within the file browser, such as upload, download, delete, and so on. Better yet, you can modify the TinyMCE initialization for Richtext TVs, so they will have their own version or TinyMCE in NewsPublisher.

    <p>The elFinder browser also provides image editing within NewsPublisher. You can crop, rotate, and resize images when you insert them without altering the original image.</p>

<p>New Tpl chunks for initializing TinyMCE and elFinder allow you to customize their operation by creating and specifying your own custom Tpl chunks, and you can set the directory for file browsing within richtext sections of any of your non-TV richtext sections.</p>

<p>There are also several changes to make NewsPublisher more secure.</p>

<h3>Upgrade Checklist</h3>
    <p>Here are the main things you'll want to deal with after the upgrade. See the text below for details.</p>
    <ul>
        <li><code>np_login_redirect</code> and <code>np_login_id</code> System Settings (newspublisher namespace)</li>
        <li><code>file_manager permission</code></li>
        <li><code>&initfilebrowser</code> property (NewsPublisher snippet)</li>
        <li><code>&redirecttologin property (NewsPublisher snippet)</code></li>
        <li><code>&loginResourceId property</code> (Login snippet)</li>
        <li><code>&contexts</code> property (Login snippet)</li>
        <li>npElfinderConnector snippet properties</li>
        <li>Tpl Changes</li>


    </ul>

<h3>Update: Login Redirect</h3>

    <p>NewsPublisher now checks for login status and redirects users to the Login page if they are not logged in. To configure this option, see the <a href="[[~[[*id]]]]#np_login_redirect">Login Redirect</a> section above.</p>

<p>For improved security, you no longer need to log users in to the <code>mgr</code> context for NewsPublisher, so you should <b>remove <code>mgr</code> from the <code>&contexts</code> property of the Login snippet tag</b> and list only front-end contexts there.</p>

<h3>Tpl Changes</h3>

    <p>If you have not changed the default Tpl chunks, and have not specified alternate chunks in the Tpl properties, you should be fine. If you have, these are the only Tpl chunks that have changed (as a result of integrating the elFinder file browser): </p>
    <ul>
        <li>npFileTpl</li>
        <li>npImageTpl</li>
        <li>npTextTpl</li>
        <li>npTextAreaTpl</li>
    </ul>

    <p>If you have modified any of those default chunks, and need to keep the modifications, rename your chunks <b>before installing NewsPublisher 3.0</b>. Then, install NewsPublisher 3.0. Integrate the changes in NewsPublisher's new chunks into your renamed chunks. Then, specify the renamed chunks in the Tpl properties of the NewsPublisher snippet tag, or in a property set.</p>

    <p>If you have duplicated the default chunks already and use properties to specify them, just install NewsPublisher 3.0 and integrate the features of its new Tpl chunks into your duplicates.</p>

<h3>Update: File Browser Access, Customization, and Commands</h3>

    <p>NewsPublisher 3.0 uses the <a href="https://github.com/Studio-42/elFinder/wiki">elFinder Browser</a>.</p>
    <p>To configure the file browser, see the <a href="[[~[[*id]]]]#np_configuring_elfinder">Configuring elFinder section above</a>.</p>

<h3>Update: TinyMCE Configuration</h3>

    <p>NewsPublisher 3.0 loads <a href="https://www.tinymce.com/docs/">TinyMCE 4</a> directly from <a href="tinymce.com">tinymce.com</a></p>
    <p>To configure TinyMCE, see the <a href="[[~[[*id]]]]#np_configuring_tinymce">section above</a>.</p>


</div>
<p>&nbsp;</p>
